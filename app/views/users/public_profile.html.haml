.form-heading
  - user_name = @user.public_profile.nil? ? @user.public_profile.first_name.capitalize : @user.email.split('@')[0].capitalize
  %h2=current_user == @user ? 'My Profile' : "#{user_name}'s Profile"
- if current_user.can_change_role_and_status?(@user)
  = render partial: "update_status"
- @tab = 'public_profile' if @tab.blank?
%div.tabbable
  %ul.nav.nav-tabs
    %li.public-tab{class: ('active' if @user.valid?)}
      %a{data: {toggle: 'tab'}, href: '#public'}
        Public Profile 123
    %li.private-tab
      %a{data: {toggle: 'tab'}, href: '#private'}
        Personal Details
    - if can? :edit, User
      %li.emp-details-tab{:class => ("active" if @user.errors.keys.include?(:next_assessment_month))}
        %a{data: {toggle: 'tab'}, href: '#emp-details'}
          Employee details
    - if DOCUMENT_MANAGEMENT.include?(current_user.role) || current_user == @user
      %li.document-tab
        %a{data: {toggle: 'tab'}, href: '#document'}
          Documents

  .tab-content
    .tab-pane.active#public
      = render partial: 'public_profile'
    .tab-pane#private
      = render partial: 'private_profile'
    .tab-pane#emp-details
      = render partial: 'employee_detail'
    .tab-pane#document
      = render partial: 'document'

:javascript
  error = #{!@private_profile.errors.full_messages.empty?}
  if(error){
    $('.private-tab a').click();
  }
